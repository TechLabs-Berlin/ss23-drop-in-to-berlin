{"ast":null,"code":"var _jsxFileName = \"/Users/felix/Projekte/Web-Dev/TechLabs/100-DIB/ss23-drop-in-to-berlin/dib/src/components/SearchBar/SearchBar.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from 'react';\nimport RestContext from \"../../context/RestContext\";\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction debounce(func, wait) {\n  let timeout;\n  return function (...args) {\n    const context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(context, args), wait);\n  };\n}\nfunction SearchBar() {\n  _s();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [activeIndex, setActiveIndex] = useState(-1);\n  const [searchSuggestions, setSearchSuggestions] = useState([]);\n  const {\n    restaurants\n  } = useContext(RestContext);\n  const handleSearchChange = searchTerm => {\n    const filteredResults = restaurants.filter(restaurant => restaurant.name.toLowerCase().includes(searchTerm.toLowerCase()));\n    setSearchSuggestions(filteredResults.slice(0, 8));\n  };\n  useEffect(() => {\n    const debouncedSearch = debounce(handleSearchChange, 300);\n    if (searchTerm) {\n      debouncedSearch(searchTerm);\n    }\n  }, [searchTerm, restaurants]);\n  const handleInputChange = event => {\n    setSearchTerm(event.target.value);\n    setActiveIndex(-1);\n  };\n  const handleSuggestionClick = suggestion => {\n    setSearchTerm(suggestion.name);\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'ArrowDown') {\n      setActiveIndex(prev => Math.min(prev + 1, searchSuggestions.length - 1));\n    } else if (e.key === 'ArrowUp') {\n      setActiveIndex(prev => Math.max(prev - 1, 0));\n    } else if (e.key === 'Enter' && activeIndex >= 0) {\n      handleSuggestionClick(searchSuggestions[activeIndex]);\n    }\n  };\n\n  /* \n  const displayedSearchSuggestions = searchSuggestions.map(restaurant => (\n      <div key={restaurant.id} className=\"border p-4 rounded\">\n          <img src={restaurant.imageURL} alt={restaurant.name} className=\"w-full h-48 object-cover rounded\" />\n          <h2 className=\"text-xl font-semibold mt-2\">{restaurant.name}</h2>\n          <p className=\"text-gray-600\">{restaurant.description}</p>\n      </div>\n  ))\n  */\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative bg-gray-100 p-2 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Type what you love...\",\n        value: searchTerm,\n        onChange: handleInputChange,\n        onKeyDown: handleKeyDown,\n        className: \"px-4 py-2 w-full border-2 border-gray-300 bg-gray-100 rounded-lg focus:outline-none focus:border-black\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), searchTerm && /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"absolute w-full mt-1 border-t-0 rounded-lg overflow-y-auto max-h-40 bg-white shadow-lg z-10 border-black border-2\",\n        children: searchSuggestions.length > 0 ? searchSuggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(Link, {\n          to: `/rest/${suggestion.reference}`,\n          children: /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => handleSuggestionClick(suggestion),\n            className: `px-4 py-2 cursor-pointer hover:bg-gray-200 ${index === activeIndex ? 'bg-gray-300' : ''}`,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: suggestion.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 37\n            }, this)\n          }, suggestion.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 33\n        }, this)) : /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"px-4 py-2 font-semibold text-gray-500\",\n          children: \"No matches found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 space-y-4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n}\n_s(SearchBar, \"/Y/dPrBBkykEggOW68jnWEWqd7E=\");\n_c = SearchBar;\nexport default SearchBar;\nvar _c;\n$RefreshReg$(_c, \"SearchBar\");","map":{"version":3,"names":["useState","useEffect","useContext","RestContext","Link","jsxDEV","_jsxDEV","debounce","func","wait","timeout","args","context","clearTimeout","setTimeout","apply","SearchBar","_s","searchTerm","setSearchTerm","activeIndex","setActiveIndex","searchSuggestions","setSearchSuggestions","restaurants","handleSearchChange","filteredResults","filter","restaurant","name","toLowerCase","includes","slice","debouncedSearch","handleInputChange","event","target","value","handleSuggestionClick","suggestion","handleKeyDown","e","key","prev","Math","min","length","max","className","children","type","placeholder","onChange","onKeyDown","fileName","_jsxFileName","lineNumber","columnNumber","map","index","to","reference","onClick","id","_c","$RefreshReg$"],"sources":["/Users/felix/Projekte/Web-Dev/TechLabs/100-DIB/ss23-drop-in-to-berlin/dib/src/components/SearchBar/SearchBar.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport RestContext from \"../../context/RestContext\"\nimport { Link } from 'react-router-dom';\n\nfunction debounce(func, wait) {\n    let timeout;\n    return function (...args) {\n        const context = this;\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(context, args), wait);\n    };\n}\n\nfunction SearchBar() {\n    const [searchTerm, setSearchTerm] = useState('');\n    const [activeIndex, setActiveIndex] = useState(-1);\n    const [searchSuggestions, setSearchSuggestions] = useState([]);\n    const { restaurants } = useContext(RestContext);\n\n    const handleSearchChange = (searchTerm) => {\n        const filteredResults = restaurants.filter(restaurant =>\n            restaurant.name.toLowerCase().includes(searchTerm.toLowerCase())\n        );\n        setSearchSuggestions(filteredResults.slice(0, 8));\n    };\n\n    useEffect(() => {\n        const debouncedSearch = debounce(handleSearchChange, 300);\n        if (searchTerm) {\n            debouncedSearch(searchTerm);\n        }\n    }, [searchTerm, restaurants]);\n\n    const handleInputChange = (event) => {\n        setSearchTerm(event.target.value);\n        setActiveIndex(-1);\n    };\n\n    const handleSuggestionClick = (suggestion) => {\n        setSearchTerm(suggestion.name);\n    };\n\n    const handleKeyDown = (e) => {\n        if (e.key === 'ArrowDown') {\n            setActiveIndex((prev) => Math.min(prev + 1, searchSuggestions.length - 1));\n        } else if (e.key === 'ArrowUp') {\n            setActiveIndex((prev) => Math.max(prev - 1, 0));\n        } else if (e.key === 'Enter' && activeIndex >= 0) {\n            handleSuggestionClick(searchSuggestions[activeIndex]);\n        }\n    };\n\n    /* \n    const displayedSearchSuggestions = searchSuggestions.map(restaurant => (\n        <div key={restaurant.id} className=\"border p-4 rounded\">\n            <img src={restaurant.imageURL} alt={restaurant.name} className=\"w-full h-48 object-cover rounded\" />\n            <h2 className=\"text-xl font-semibold mt-2\">{restaurant.name}</h2>\n            <p className=\"text-gray-600\">{restaurant.description}</p>\n        </div>\n    ))\n    */\n\n    return (\n        <div className=\"p-4\">\n            <div className=\"relative bg-gray-100 p-2 rounded-lg\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Type what you love...\"\n                    value={searchTerm}\n                    onChange={handleInputChange}\n                    onKeyDown={handleKeyDown}\n                    className=\"px-4 py-2 w-full border-2 border-gray-300 bg-gray-100 rounded-lg focus:outline-none focus:border-black\"\n                />\n                {searchTerm && (\n                    <ul className=\"absolute w-full mt-1 border-t-0 rounded-lg overflow-y-auto max-h-40 bg-white shadow-lg z-10 border-black border-2\">\n                        {searchSuggestions.length > 0 ? (\n                            searchSuggestions.map((suggestion, index) => (\n                                <Link to={`/rest/${suggestion.reference}`}>\n                                <li\n                                    key={suggestion.id}\n                                    onClick={() => handleSuggestionClick(suggestion)}\n                                    className={`px-4 py-2 cursor-pointer hover:bg-gray-200 ${index === activeIndex ? 'bg-gray-300' : ''}`}\n                                >\n                                    <span className=\"font-semibold\">{suggestion.name}</span>\n                                </li>\n                                </Link>\n                            ))\n                        ) : (\n                            <li className=\"px-4 py-2 font-semibold text-gray-500\">No matches found</li>\n                        )}\n                    </ul>\n                )}\n            </div>\n            <div className=\"mt-4 space-y-4\">\n                {/* displayedSearchSuggestions */}\n            </div>\n        </div>\n    );\n}\n\nexport default SearchBar;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}