{"ast":null,"code":"var _jsxFileName = \"/Users/felix/Projekte/Web-Dev/TechLabs/100-DIB/ss23-drop-in-to-berlin/client/src/components/SearchBar/SearchBar.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport './SearchBar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction debounce(func, wait) {\n  let timeout;\n  return function (...args) {\n    const context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(context, args), wait);\n  };\n}\nfunction SearchBar({\n  searchTerm,\n  setSearchTerm\n}) {\n  _s();\n  const [activeIndex, setActiveIndex] = useState(-1);\n  const [searchSuggestions, setSearchSuggestions] = useState([]);\n  const handleSearchChange = async searchTerm => {\n    try {\n      const response = await axios.get(`http://localhost:3001/suggestions?term=${searchTerm}`);\n      const restaurantNames = response.data.map((item, index) => ({\n        key: index,\n        name: item.name,\n        reference: item.reference,\n        _id: item._id\n      }));\n      setSearchSuggestions(restaurantNames);\n      console.log(searchSuggestions);\n    } catch (error) {\n      console.error('RestList error:', error);\n    }\n  };\n  useEffect(() => {\n    const debouncedSearch = debounce(handleSearchChange, 300);\n    if (searchTerm) {\n      debouncedSearch(searchTerm);\n    }\n  }, [searchTerm]);\n  const handleInputChange = e => {\n    setSearchTerm(e.target.value);\n    setActiveIndex(-1);\n  };\n  const handleSuggestionClick = suggestion => {\n    setSearchTerm(suggestion.name);\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'ArrowDown') {\n      setActiveIndex(prev => Math.min(prev + 1, searchSuggestions.length - 1));\n    } else if (e.key === 'ArrowUp') {\n      setActiveIndex(prev => Math.max(prev - 1, 0));\n    } else if (e.key === 'Enter' && activeIndex >= 0) {\n      handleSuggestionClick(searchSuggestions[activeIndex]);\n    }\n  };\n  console.log('searchBar before return, with this suggestions:', searchSuggestions);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-bar-and-suggestions-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Type what you love...\",\n      value: searchTerm,\n      onChange: handleInputChange,\n      onKeyDown: handleKeyDown,\n      className: \"search-bar-input\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), searchTerm && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"search-bar-suggestion-list\",\n      children: searchSuggestions.length > 0 ? searchSuggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(Link, {\n        to: `/rest/${suggestion._id}`,\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: () => handleSuggestionClick(suggestion),\n          className: `suggestion-item ${index === activeIndex ? 'background-grey' : ''}`,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: suggestion.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 19\n        }, this)\n      }, `${suggestion._id}-search-suggestion`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)) : /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"suggestion-item\",\n        children: \"No matches found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 7\n  }, this);\n}\n_s(SearchBar, \"8TptyCPWvGtAqEsjbhAN050+Hpo=\");\n_c = SearchBar;\nexport default SearchBar;\nvar _c;\n$RefreshReg$(_c, \"SearchBar\");","map":{"version":3,"names":["useState","useEffect","axios","Link","jsxDEV","_jsxDEV","debounce","func","wait","timeout","args","context","clearTimeout","setTimeout","apply","SearchBar","searchTerm","setSearchTerm","_s","activeIndex","setActiveIndex","searchSuggestions","setSearchSuggestions","handleSearchChange","response","get","restaurantNames","data","map","item","index","key","name","reference","_id","console","log","error","debouncedSearch","handleInputChange","e","target","value","handleSuggestionClick","suggestion","handleKeyDown","prev","Math","min","length","max","className","children","type","placeholder","onChange","onKeyDown","fileName","_jsxFileName","lineNumber","columnNumber","to","onClick","_c","$RefreshReg$"],"sources":["/Users/felix/Projekte/Web-Dev/TechLabs/100-DIB/ss23-drop-in-to-berlin/client/src/components/SearchBar/SearchBar.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport './SearchBar.css'\n\nfunction debounce(func, wait) {\n  let timeout;\n  return function (...args) {\n    const context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(context, args), wait);\n  };\n}\n\nfunction SearchBar({ searchTerm, setSearchTerm }) {\n  const [activeIndex, setActiveIndex] = useState(-1);\n  const [searchSuggestions, setSearchSuggestions] = useState([]);\n\n  const handleSearchChange = async (searchTerm) => {\n    try {\n      const response = await axios.get(\n        `http://localhost:3001/suggestions?term=${searchTerm}`\n      );\n      const restaurantNames = response.data.map((item, index) => ({\n        key: index,\n        name: item.name,\n        reference: item.reference,\n        _id: item._id\n      }));\n      setSearchSuggestions(restaurantNames);\n      console.log(searchSuggestions);\n    } catch (error) {\n      console.error('RestList error:', error);\n    }\n  };\n\n  useEffect(() => {\n    const debouncedSearch = debounce(handleSearchChange, 300);\n    if (searchTerm) {\n      debouncedSearch(searchTerm);\n    }\n  }, [searchTerm]);\n\n  const handleInputChange = (e) => {\n    setSearchTerm(e.target.value);\n    setActiveIndex(-1);\n  };\n\n  const handleSuggestionClick = (suggestion) => {\n    setSearchTerm(suggestion.name);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'ArrowDown') {\n      setActiveIndex((prev) =>\n        Math.min(prev + 1, searchSuggestions.length - 1)\n      );\n    } else if (e.key === 'ArrowUp') {\n      setActiveIndex((prev) => Math.max(prev - 1, 0));\n    } else if (e.key === 'Enter' && activeIndex >= 0) {\n      handleSuggestionClick(searchSuggestions[activeIndex]);\n    }\n  };\n\n  console.log(\n    'searchBar before return, with this suggestions:',\n    searchSuggestions\n  );\n\n  return (\n      <div className='search-bar-and-suggestions-wrapper'>\n        <input\n          type='text'\n          placeholder='Type what you love...'\n          value={searchTerm}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          className=\"search-bar-input\"\n        />\n        {searchTerm && (\n          <ul\n          className = \"search-bar-suggestion-list\"\n          >\n            {searchSuggestions.length > 0 ? (\n              searchSuggestions.map((suggestion, index) => (\n                <Link\n                  to={`/rest/${suggestion._id}`}\n                  key={`${suggestion._id}-search-suggestion`}>\n                  <li\n                    onClick={() => handleSuggestionClick(suggestion)}\n                    className={`suggestion-item ${\n                      index === activeIndex ? 'background-grey' : ''\n                    }`}>\n                    <span className='font-semibold'>{suggestion.name}</span>\n                  </li>\n                </Link>\n              ))\n            ) : (\n              <li className='suggestion-item'>\n                No matches found\n              </li>\n            )}\n          </ul>\n        )}\n      </div>\n  );\n}\n\nexport default SearchBar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}