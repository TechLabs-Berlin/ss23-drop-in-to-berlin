{"ast":null,"code":"var _jsxFileName = \"/Users/felix/Projekte/Web-Dev/TechLabs/100-DIB/ss23-drop-in-to-berlin/dib/src/components/SearchBar/SearchBar.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from 'react';\nimport RestContext from \"../../context/RestaurantContext\";\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction debounce(func, wait) {\n  let timeout;\n  return function (...args) {\n    const context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(context, args), wait);\n  };\n}\nfunction SearchBar({\n  searchTerm,\n  setSearchTerm\n}) {\n  _s();\n  const [activeIndex, setActiveIndex] = useState(-1);\n  const [searchSuggestions, setSearchSuggestions] = useState([]);\n  const {\n    restaurants\n  } = useContext(RestContext);\n  const handleSearchChange = async searchTerm => {\n    try {\n      const response = await axios.get(`http://localhost:3001/suggestions?term=${searchTerm}`);\n      const restaurantNames = response.data.map((item, index) => ({\n        key: index,\n        name: item.name\n      }));\n      setSearchSuggestions(restaurantNames);\n    } catch (error) {\n      console.error('RestList error:', error);\n    }\n  };\n  useEffect(() => {\n    const debouncedSearch = debounce(handleSearchChange, 300);\n    if (searchTerm) {\n      debouncedSearch(searchTerm);\n    }\n  }, [searchTerm, restaurants]);\n  const handleInputChange = event => {\n    setSearchTerm(event.target.value);\n    setActiveIndex(-1);\n  };\n  const handleSuggestionClick = suggestion => {\n    setSearchTerm(suggestion.name);\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'ArrowDown') {\n      setActiveIndex(prev => Math.min(prev + 1, searchSuggestions.length - 1));\n    } else if (e.key === 'ArrowUp') {\n      setActiveIndex(prev => Math.max(prev - 1, 0));\n    } else if (e.key === 'Enter' && activeIndex >= 0) {\n      handleSuggestionClick(searchSuggestions[activeIndex]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-0 p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative bg-gray-100 p-2 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        style: {\n          width: '600px'\n        },\n        placeholder: \"Type what you love...\",\n        value: searchTerm,\n        onChange: handleInputChange,\n        onKeyDown: handleKeyDown,\n        className: \"px-4 py-2 w-full h-12 border-2 border-gray-300 bg-gray-100 rounded-lg focus:outline-none focus:border-black\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), searchTerm && /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"absolute w-full mt-1 border-t-0 rounded-lg overflow-y-auto max-h-40 bg-white shadow-lg z-10 border-black border-2\",\n        children: searchSuggestions.length > 0 ? searchSuggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(Link, {\n          to: `/rest/${suggestion.reference}`,\n          children: /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => handleSuggestionClick(suggestion),\n            className: `px-4 py-2 cursor-pointer hover:bg-gray-200 ${index === activeIndex ? 'bg-gray-300' : ''}`,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: suggestion.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 25\n            }, this)\n          }, suggestion.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)) : /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"px-4 py-2 font-semibold text-gray-500\",\n          children: \"No matches found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 space-y-4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchBar, \"08wjnU2JshZfGo6ko7FbbkTrj98=\");\n_c = SearchBar;\nexport default SearchBar;\nvar _c;\n$RefreshReg$(_c, \"SearchBar\");","map":{"version":3,"names":["useState","useEffect","useContext","RestContext","axios","Link","jsxDEV","_jsxDEV","debounce","func","wait","timeout","args","context","clearTimeout","setTimeout","apply","SearchBar","searchTerm","setSearchTerm","_s","activeIndex","setActiveIndex","searchSuggestions","setSearchSuggestions","restaurants","handleSearchChange","response","get","restaurantNames","data","map","item","index","key","name","error","console","debouncedSearch","handleInputChange","event","target","value","handleSuggestionClick","suggestion","handleKeyDown","e","prev","Math","min","length","max","className","children","type","style","width","placeholder","onChange","onKeyDown","fileName","_jsxFileName","lineNumber","columnNumber","to","reference","onClick","id","_c","$RefreshReg$"],"sources":["/Users/felix/Projekte/Web-Dev/TechLabs/100-DIB/ss23-drop-in-to-berlin/dib/src/components/SearchBar/SearchBar.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport RestContext from \"../../context/RestaurantContext\"\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nfunction debounce(func, wait) {\n    let timeout;\n    return function (...args) {\n        const context = this;\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(context, args), wait);\n    };\n}\n\n\nfunction SearchBar({ searchTerm, setSearchTerm }) {\n    const [activeIndex, setActiveIndex] = useState(-1);\n    const [searchSuggestions, setSearchSuggestions] = useState([]);\n    const { restaurants } = useContext(RestContext);\n\n\n\n\n    const handleSearchChange = async (searchTerm) => {\n        try {\n          const response = await axios.get(`http://localhost:3001/suggestions?term=${searchTerm}`);\n          const restaurantNames = response.data.map((item, index) =>({\n            key: index,\n            name: item.name\n          }) );\n          setSearchSuggestions(restaurantNames);\n        } catch (error) {\n          console.error('RestList error:',error);\n        }\n      };\n\n\n\n    useEffect(() => {\n        const debouncedSearch = debounce(handleSearchChange, 300);\n        if (searchTerm) {\n            debouncedSearch(searchTerm);\n        }\n    }, [searchTerm, restaurants]);\n\n    const handleInputChange = (event) => {\n        setSearchTerm(event.target.value);\n        setActiveIndex(-1);\n    };\n\n    const handleSuggestionClick = (suggestion) => {\n        setSearchTerm(suggestion.name);\n    };\n\n    const handleKeyDown = (e) => {\n        if (e.key === 'ArrowDown') {\n            setActiveIndex((prev) => Math.min(prev + 1, searchSuggestions.length - 1));\n        } else if (e.key === 'ArrowUp') {\n            setActiveIndex((prev) => Math.max(prev - 1, 0));\n        } else if (e.key === 'Enter' && activeIndex >= 0) {\n            handleSuggestionClick(searchSuggestions[activeIndex]);\n        }\n    };\n\n  return (\n    <div className=\"mb-0 p-4\">\n        <div className=\"relative bg-gray-100 p-2 rounded-lg\">\n        <input\n        type=\"text\"\n        style={{ width: '600px' }}\n        placeholder=\"Type what you love...\"\n        value={searchTerm}\n        onChange={handleInputChange}\n        onKeyDown={handleKeyDown}\n            className=\"px-4 py-2 w-full h-12 border-2 border-gray-300 bg-gray-100 rounded-lg focus:outline-none focus:border-black\"\n        />\n         {searchTerm && (\n             <ul className=\"absolute w-full mt-1 border-t-0 rounded-lg overflow-y-auto max-h-40 bg-white shadow-lg z-10 border-black border-2\">\n                {searchSuggestions.length > 0 ? (\n                    searchSuggestions.map((suggestion, index) => (\n                    <Link to={`/rest/${suggestion.reference}`}>\n                        <li\n                        key={suggestion.id}\n                        onClick={() => handleSuggestionClick(suggestion)}\n                        className={`px-4 py-2 cursor-pointer hover:bg-gray-200 ${index === activeIndex ? 'bg-gray-300' : ''}`}\n                        >\n                        <span className=\"font-semibold\">{suggestion.name}</span>\n                        </li>\n                        </Link>\n                    ))\n                ) : (\n                     <li className=\"px-4 py-2 font-semibold text-gray-500\">No matches found</li>\n                    )}\n                 </ul>\n               )}\n          </div>\n          <div className=\"mt-4 space-y-4\">\n           {/* displayedSearchSuggestions */}\n          </div>\n       </div>\n    );\n}\n\nexport default SearchBar;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}